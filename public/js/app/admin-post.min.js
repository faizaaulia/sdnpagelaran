$(document).ready(function(){function e(e){const t=function(){window.location.href=e};$(document).mousedown(t).keypress(t)}function t(){const e=function(){$(".swal2-container").modal("hide")};$(document).mousedown(e).keypress(e)}$(".form-control").keyup(function(){$(this).removeClass("is-invalid")}),$("#create-post").submit(function(a){a.preventDefault(),$(".invalid-feedback").remove(),$(".invalid-cke").remove(),$("#cke_desc").css("border-color",""),$("#desc").val(CKEDITOR.instances.desc.getData());const n=$("input[name=_method]").val()?"mengubah":"menambahkan";$.ajax({url:$(this).attr("action"),method:$(this).attr("method"),data:$(this).serialize(),success:function(t){Swal.fire("Sukses!","Berhasil "+n+" "+$("#create-post").data("type")+".","success"),e(t)},error:function(e){Swal.fire("Error!","Gagal "+n+" "+$("#create-post").data("type")+".","error"),t();const a=e.responseJSON.errors;$.each(a,function(e,t){"desc"==e?$("#cke_desc").after('<span class="invalid-cke" role="alert"><strong>'+t+"</strong></span>").css("border-color","#e74a3b"):$("#"+e).addClass("is-invalid").after('<span class="invalid-feedback" role="alert"><strong>'+t+"</strong></span>")})}})}),$(".btn-detail").click(function(e){e.preventDefault(),$.ajax({url:$(this).attr("href"),success:function(e){$("#detailModal").modal("show"),$(".modal-detail").html(e)},error:function(){Swal.fire("Error!","Berita tidak ditemukan.","error")}})}),$(".btn-delete").submit(function(a){a.preventDefault();const n=$(this).data("type"),s=$(this).data("type")[0].toUpperCase()+$(this).data("type").slice(1);Swal.fire({title:"Hapus "+$(this).data("type")+"?",text:s+" akan dihapus permanen!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, hapus!",cancelButtonText:"Batal"}).then(a=>{a.isConfirmed&&$.ajax({url:$(this).attr("action"),data:$(this).serialize(),type:"delete",success:function(t){Swal.fire("Berhasil!",s+" berhasil dihapus.","success"),e(t)},error:function(){Swal.fire("Error!","Gagal menghapus "+n+".","error"),t()}})})})});